# Gen1 NFT System - Complete Workflow

## Concept: Evolvable Animated NFTs

Gen1 NFTs are **animated, evolvable mood rings** that respond to their holder's on-chain and social activity.

## The Complete Workflow

### Phase 1: Design & Initial Mint

1. **Design in Gen1 Studio** (`/gen1-creator`)
   - Tune visual parameters (Flow Field colors, FlowFields lines, Contour mapping)
   - Preview looping animation
   - Export settings JSON

2. **Batch Render Base NFTs**
   - All NFTs minted with same base settings
   - Upload animated GIFs to IPFS
   - Mint NFTs with base metadata

**Result**: Everyone gets the same animation at mint time.

### Phase 2: Evolution (The Cool Part)

**Weekly/Daily Batch Update**:

1. Script reads all token holders from contract
2. For each holder, fetch their data:
   - **Farcaster**: Last 10 posts, last 100 posts, sentiment analysis
   - **On-chain**: Token count, transaction count, holdings
   - **Associations**: Neighbor tokens, related NFTs

3. **Modify parameters** based on holder data:
   ```javascript
   // Example mapping
   settings.flowField.color1 = analyzePosts(last10Posts).sentiment;
   settings.flowField.color2 = analyzePosts(last100Posts).sentiment;
   settings.contour.levels = holderTokenCount / 10;
   settings.flowFields.baseFreq = activityLevel * 0.02;
   ```

4. **Rerender NFT** with modified settings
5. **Upload new GIF** to IPFS
6. **Update metadata** on-chain via `updateMetadata()` function

**Result**: Each NFT evolves to reflect its holder's activity!

## Example Evolution Scenarios

### Scenario 1: Active Social User
- Lots of positive Farcaster posts
- Colors shift to warm tones (oranges, yellows)
- Animation becomes more energetic

### Scenario 2: DeFi Power User
- High transaction count
- Token holdings increase
- Contour levels increase
- Flow fields become more complex

### Scenario 3: Collector
- Many NFTs in wallet
- Neighbor associations increase
- Flow field amplitude boosted
- Contour mapping becomes more detailed

### Scenario 4: Inactive User
- Few posts, low activity
- Colors remain neutral/cool
- Animation stays at base settings

## Technical Implementation

### 1. Base Settings File (`gen1-base-settings.json`)
Generated by Gen1 Studio, contains:
- All visual parameters
- Layer toggles
- Data source preferences

### 2. Batch Update Script (`scripts/batch-update-nft-metadata.js`)
- Reads holders from contract
- Fetches holder data
- Modifies settings
- Renders new GIFs
- Updates metadata on-chain

### 3. Rendering Server (to be built)
- Takes settings JSON
- Generates 300 frames (5 second loop)
- Encodes as animated GIF
- Higher quality than browser rendering

## Contract Integration

The Gen2 contract already supports metadata updates:

```solidity
function updateMetadata(uint256 tokenId, string memory newMetadata)
```

This enables:
- ‚úÖ Metadata evolution
- ‚úÖ Image URL updates
- ‚úÖ Attribute changes
- ‚úÖ All without minting new tokens

## Future Modifiers (Add Gradually)

Start simple:
1. ‚úÖ Farcaster sentiment ‚Üí background colors
2. ‚è≥ Transaction count ‚Üí flow field amplitude
3. ‚è≥ Token holdings ‚Üí contour levels
4. ‚è≥ Neighbor associations ‚Üí flow line density

Add new modifiers one at a time, test, then expand.

## Running the Batch Update

```bash
# Install dependencies
npm install

# Set environment variables
export GEN1_CONTRACT_ADDRESS=0x...

# Run batch update
node scripts/batch-update-nft-metadata.js
```

This will:
1. Process all tokens
2. Generate updated images
3. Upload to IPFS
4. Update on-chain metadata
5. Log progress

---

**The Magic**: NFTs that were identical at mint evolve into unique pieces based on how active/engaged their holders are! üé®

